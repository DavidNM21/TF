<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista Desplegable Dependiente para 3 Productos</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .product-quantity {
            display: inline-block;
            margin-left: 10px;
            width: 60px;
        }
    </style>
</head>
<body>

<h2>Producto 1</h2>
<select id="category1">
    <option value="">Selecciona una categoría</option>
    <option value="a">Categoría A</option>
    <option value="b">Categoría B</option>
    <option value="c">Categoría C</option>
</select>

<select id="subcategory1" disabled>
    <option value="">Selecciona una subcategoría</option>
</select>

<div>
    <select id="product1" disabled>
        <option value="">Selecciona un producto</option>
    </select>
    <input type="number" id="quantity1" class="product-quantity" min="0" placeholder="Piezas" disabled>
</div>

<h2>Producto 2</h2>
<select id="category2">
    <option value="">Selecciona una categoría</option>
    <option value="a">Categoría A</option>
    <option value="b">Categoría B</option>
    <option value="c">Categoría C</option>
</select>

<select id="subcategory2" disabled>
    <option value="">Selecciona una subcategoría</option>
</select>

<div>
    <select id="product2" disabled>
        <option value="">Selecciona un producto</option>
    </select>
    <input type="number" id="quantity2" class="product-quantity" min="0" placeholder="Piezas" disabled>
</div>

<h2>Producto 3</h2>
<select id="category3">
    <option value="">Selecciona una categoría</option>
    <option value="a">Categoría A</option>
    <option value="b">Categoría B</option>
    <option value="c">Categoría C</option>
</select>

<select id="subcategory3" disabled>
    <option value="">Selecciona una subcategoría</option>
</select>

<div>
    <select id="product3" disabled>
        <option value="">Selecciona un producto</option>
    </select>
    <input type="number" id="quantity3" class="product-quantity" min="0" placeholder="Piezas" disabled>
</div>

<button id="copyButton">Copiar</button>

<script>
    // Objeto que representa las categorías, subcategorías y productos
    const data = {
        "a": {
            "a1": ["Producto A1-1", "Producto A1-2", "Producto A1-3"],
            "a2": ["Producto A2-1", "Producto A2-2", "Producto A2-3"],
            "a3": ["Producto A3-1", "Producto A3-2", "Producto A3-3"]
        },
        "b": {
            "b1": ["Producto B1-1", "Producto B1-2", "Producto B1-3"],
            "b2": ["Producto B2-1", "Producto B2-2", "Producto B2-3"],
            "b3": ["Producto B3-1", "Producto B3-2", "Producto B3-3"]
        },
        "c": {
            "c1": ["Producto C1-1", "Producto C1-2", "Producto C1-3"],
            "c2": ["Producto C2-1", "Producto C2-2", "Producto C2-3"],
            "c3": ["Producto C3-1", "Producto C3-2", "Producto C3-3"]
        }
    };

    // Funciones para los tres conjuntos de select
    for (let i = 1; i <= 3; i++) {
        $(`#category${i}`).change(function() {
            const category = $(this).val();
            $(`#subcategory${i}`).empty().append('<option value="">Selecciona una subcategoría</option>').prop('disabled', false);
            if (category) {
                Object.keys(data[category]).forEach(subcategory => {
                    $(`#subcategory${i}`).append(`<option value="${subcategory}">${subcategory}</option>`);
                });
            } else {
                $(`#subcategory${i}`).prop('disabled', true);
                $(`#product${i}`).prop('disabled', true);
                $(`#quantity${i}`).prop('disabled', true).val('');
            }
            $(`#product${i}`).empty().append('<option value="">Selecciona un producto</option>').prop('disabled', true);
            $(`#quantity${i}`).prop('disabled', true).val('');
        });

        $(`#subcategory${i}`).change(function() {
            const category = $(`#category${i}`).val();
            const subcategory = $(this).val();
            $(`#product${i}`).empty().append('<option value="">Selecciona un producto</option>').prop('disabled', false);
            if (subcategory) {
                data[category][subcategory].forEach(product => {
                    $(`#product${i}`).append(`<option value="${product}">${product}</option>`);
                });
            } else {
                $(`#product${i}`).prop('disabled', true);
                $(`#quantity${i}`).prop('disabled', true).val('');
            }
            $(`#quantity${i}`).prop('disabled', true).val('');
        });

        $(`#product${i}`).change(function() {
            $(`#quantity${i}`).prop('disabled', false).val('');
        });
    }

    // Función para copiar productos con cantidad mayor a 0
    document.getElementById('copyButton').addEventListener('click', function() {
        let selectedProducts = [];
        for (let i = 1; i <= 3; i++) {
            const product = $(`#product${i}`).val();
            const quantity = parseInt($(`#quantity${i}`).val(), 10);
            if (product && !isNaN(quantity) && quantity > 0) {
                selectedProducts.push(`${product}: ${quantity} piezas`);
            }
        }

        if (selectedProducts.length > 0) {
            const textToCopy = selectedProducts.join('\n');
            navigator.clipboard.writeText(textToCopy).then(() => {
                alert('Productos copiados al portapapeles!');
            }, (err) => {
                console.error('No se pudo copiar al portapapeles: ', err);
                alert('Hubo un error al intentar copiar al portapapeles.');
            });
        } else {
            alert('No hay productos seleccionados con cantidad mayor a 0.');
        }
    });
</script>

</body>
</html>
